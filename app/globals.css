@tailwind base;
@tailwind components;
@tailwind utilities;

/* ─── Base Styles ─── */
body {
  @apply bg-gray-50 text-gray-900;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  overflow-x: hidden;
}

/* Minimum body text 14px for accessibility */
html {
  font-size: 16px;
  scroll-behavior: smooth;
}

/* ─── Touch Target Sizing ─── */
@layer components {
  /* Ensure all interactive elements have min 44px tap target on touch devices */
  .touch-target {
    @apply min-h-[44px] min-w-[44px];
  }
}

/* ─── Mobile Tab System (Test Page) ─── */
.test-tab-bar {
  @apply flex border-b border-gray-200 bg-white;
}

.test-tab {
  @apply flex-1 py-3 px-4 text-center font-medium text-sm transition-colors duration-200;
  @apply border-b-2 border-transparent text-gray-500;
  min-height: 44px;
}

.test-tab.active {
  @apply border-blue-600 text-blue-600 bg-blue-50;
}

.test-tab:not(.active):hover {
  @apply text-gray-700 bg-gray-50;
}

/* ─── Sticky Timer Bar ─── */
.timer-bar {
  @apply sticky top-0 z-20 bg-white shadow-md;
}

/* ─── Touch-Friendly Radio Buttons ─── */
@media (max-width: 767px) {
  .radio-option {
    @apply flex items-center p-3 rounded-lg border border-gray-200 mb-2 cursor-pointer transition-colors;
    min-height: 44px;
  }

  .radio-option:active {
    @apply bg-blue-50 border-blue-300;
  }

  .radio-option input[type="radio"] {
    @apply w-5 h-5 mr-3;
    accent-color: #2563eb;
  }

  .radio-option span {
    @apply text-base;
  }
}

/* ─── Desktop Split Screen (Test Page) ─── */
@media (min-width: 1024px) {
  .test-split-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    align-items: start;
  }

  .test-passage-panel {
    position: sticky;
    top: 5rem;
    max-height: calc(100vh - 6rem);
    overflow-y: auto;
  }
}

/* ─── Custom Scrollbar for Test Panels ─── */
.test-passage-panel::-webkit-scrollbar {
  width: 6px;
}

.test-passage-panel::-webkit-scrollbar-track {
  background: #f1f5f9;
  border-radius: 3px;
}

.test-passage-panel::-webkit-scrollbar-thumb {
  background: #94a3b8;
  border-radius: 3px;
}

.test-passage-panel::-webkit-scrollbar-thumb:hover {
  background: #64748b;
}

/* ─── Responsive Images ─── */
img {
  max-width: 100%;
  height: auto;
}

/* ─── Prevent Horizontal Overflow ─── */
* {
  max-width: 100vw;
}

main, section, div, article {
  overflow-wrap: break-word;
  word-wrap: break-word;
}

/* ─── Mobile Menu Overlay ─── */
.mobile-menu-overlay {
  @apply fixed inset-0 bg-black/50 z-40;
  animation: fadeIn 0.2s ease;
}

.mobile-menu-panel {
  @apply fixed top-0 right-0 h-full w-64 bg-white shadow-xl z-50 p-6;
  animation: slideInRight 0.25s ease;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideInRight {
  from { transform: translateX(100%); }
  to { transform: translateX(0); }
}

/* ─── Accessibility: Focus Visible ─── */
*:focus-visible {
  @apply outline-2 outline-offset-2 outline-blue-500;
  outline-style: solid;
}

/* ─── High Contrast Selection ─── */
::selection {
  @apply bg-blue-600 text-white;
}

/* ─── Responsive Tables ─── */
@media (max-width: 640px) {
  table {
    display: block;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
}

/* ─── Prevent Layout Shift ─── */
.no-cls {
  contain: layout style;
}

/* ─── Print Styles ─── */
@media print {
  .no-print {
    display: none !important;
  }
}
